import{a as e,x as l,o as a,z as t,B as s,u as n,C as o,G as c,J as u,K as d,E as r,F as i,H as v,P as g,S as p,D as m,I as b}from"./vendor-CBBAIpTX.js";import{M as h,N as f,O as y,Q as S,R as k,S as I,T as w,U as x,p as C,b9 as A,ba as N,bb as T,bc as F,a_ as P,aF as U,bd as O,be as R,bf as J,bg as V,ah as z,bh as j,aY as _,bi as D,aB as E,bj as G,bk as M,i as B,bl as q,bm as H,bn as K,bo as L,bp as Q,bq as Y,br as W,ay as X,C as Z,bs as $,o as ee,n as le,s as ae,V as te,b4 as se,bt as ne,J as oe}from"./main-LE54y1pd.js";const ce={id:"step10",class:"col-12 mb-3"},ue={class:"dailyCard"},de=s("i",{class:"uil uil-angle-up"},null,-1),re={key:1,class:"dashInfoTitle ms-3"},ie={key:0},ve={key:1},ge={key:0},pe={key:1},me={key:0},be={key:1},he={key:0},fe={key:1},ye=s("i",{class:"uil uil-angle-down"},null,-1),Se={class:"row text-center align-items-center"},ke={class:"col-12 col-lg-4 mt-1 mt-lg-0 mb-lg-1"},Ie=["value","selected"],we={class:"col-12 col-lg-8 mt-1 mt-lg-0 mb-1"},xe={class:"row"},Ce={class:"col-5"},Ae=["value","selected"],Ne=s("div",{class:"col-2"},[s("i",{class:"uil uil-angle-right-b"})],-1),Te={class:"col-5"},Fe=["value","selected"],Pe=s("div",{class:"row"},null,-1),Ue={class:"col-6 dropdown"},Oe={class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Re={class:"dashInfoTitle"},Je={class:"dropdown-menu dropdownCheck"},Ve=["value"],ze={class:"col-12 col-lg-6 mt-1 mt-lg-0 mb-lg-1"},je=["value","selected"],_e={class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},De={class:"dashInfoTitle"},Ee={class:"dropdown-menu dropdownCheck"},Ge={key:0},Me={key:1},Be=s("hr",null,null,-1),qe=s("hr",null,null,-1),He={class:"form-check"},Ke=["value"],Le={class:"col-6 col-lg-3"},Qe=["value","selected"],Ye={class:"col-6 col-lg-3 dropdown"},We={class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Xe={class:"dashInfoTitle"},Ze={class:"dropdown-menu dropdownCheck"},$e=["value"],el={class:"col-6 col-lg-3 mt-1 mt-lg-1"},ll=["value","selected"],al={class:"col-6 col-lg-3 mt-1 mt-lg-1"},tl=["value","selected"],sl=["value","selected"],nl={class:"col-12 text-center"},ol={key:0},cl=s("button",{class:"btn btn-secondary btn-sm mt-2 ms-4 dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},"Export ",-1),ul={class:"dropdown-menu"},dl={__name:"Filters",setup(dl){h.extend(f),h.extend(y),h.extend(S),h.extend(k),h.extend(I),h.extend(w),h.extend(x);let rl=e(!1),il=e({dashboard:["accounts","periodRange","grossNet","positions","timeFrame","ratio","tags"],calendar:["month","grossNet","plSatisfaction"],daily:["accounts","month","grossNet","positions","tags"],screenshots:["accounts","grossNet","positions","tags"]});function vl(){if(rl.value=!rl.value,bl(),!rl.value){G.value=JSON.parse(localStorage.getItem("selectedDateRange"));let e=D.filter(e=>e.start==G.value.start&&e.end==G.value.end);e.length>0?T.value=e[0]:T.value=D.filter(e=>-1==e.start)[0],localStorage.getItem("selectedAccounts")?localStorage.getItem("selectedAccounts").includes(",")?N.value=localStorage.getItem("selectedAccounts").split(","):(N.value=[],N.value.push(localStorage.getItem("selectedAccounts"))):N.value=[],U.value=localStorage.getItem("selectedGrossNet"),localStorage.getItem("selectedPositions")?localStorage.getItem("selectedPositions").includes(",")?R.value=localStorage.getItem("selectedPositions").split(","):(R.value=[],R.value.push(localStorage.getItem("selectedPositions"))):R.value=[],J.value=localStorage.getItem("selectedTimeFrame"),V.value=localStorage.getItem("selectedRatio"),P.value=JSON.parse(localStorage.getItem("selectedMonth")),localStorage.getItem("selectedTags")?localStorage.getItem("selectedTags").includes(",")?j.value=localStorage.getItem("selectedTags").split(","):(j.value=[],j.value.push(localStorage.getItem("selectedTags"))):j.value=[]}}function gl(e,l){"start"==e&&(G.value.start=h.tz(l,X.value).unix()),"end"==e&&(G.value.end=h.tz(l,X.value).endOf("day").unix());let a=D.filter(e=>e.start==G.value.start&&e.end==G.value.end);a.length>0?T.value=a[0]:T.value=D.filter(e=>-1==e.start)[0]}async function pl(){G.value.end<G.value.start?alert("End date cannot be before start date"):(localStorage.setItem("selectedDateRange",JSON.stringify(G.value)),"dashboard"==C.value&&G.value.end>=G.value.start&&Z.value&&$("clear"),localStorage.setItem("selectedPeriodRange",JSON.stringify(T.value)),localStorage.setItem("selectedAccounts",N.value),localStorage.setItem("selectedGrossNet",U.value),ee.value=U.value,le.value=U.value.charAt(0).toUpperCase()+U.value.slice(1),localStorage.setItem("selectedPositions",R.value),localStorage.setItem("selectedTimeFrame",J.value),localStorage.setItem("selectedRatio",V.value),"daily"!=C.value&&"calendar"!=C.value||localStorage.setItem("selectedMonth",JSON.stringify(P.value)),localStorage.setItem("selectedTags",j.value),bl(),null!=L.value&&(_.value=L.value,localStorage.setItem("selectedPlSatisfaction",_.value),L.value=null),"dashboard"==C.value&&ae(),"daily"==C.value&&(await te(),se()),"screenshots"==C.value&&(await ne(),se()),"calendar"==C.value&&oe())}l(async()=>{});let ml=e(!1);const bl=()=>{let e=[];for(let l=0;l<B.length;l++){const a=B[l];for(let l=0;l<a.tags.length;l++){const t=a.tags[l];e.push(t.id)}}e.length+1==j.value.length?ml.value=!0:ml.value=!1},hl=()=>{if(j.value=[],ml.value)ml.value=!ml.value;else{j.value.push("t000t");for(let e=0;e<B.length;e++){const l=B[e];for(let e=0;e<l.tags.length;e++){const a=l.tags[e];j.value.push(a.id)}}ml.value=!ml.value}};return(e,l)=>(a(),t("div",ce,[s("div",ue,[s("div",null,[n(rl)?c("",!0):(a(),t("span",{key:0,onClick:vl,class:"pointerClass"},[o("Filters "),de])),n(rl)?(a(),t("span",{key:2,onClick:vl,class:"pointerClass mb-3"},[o("Filters"),ye])):(a(),t("span",re,[u(s("span",null,[n(A).hasOwnProperty("accounts")&&n(A).accounts.length==n(N).length?(a(),t("span",ie,"All accounts |")):(a(),t("span",ve,"Selected accounts |"))],512),[[d,n(il)[n(C)].includes("accounts")]]),u(s("span",null,[o(r(n(T).label)+" | ",1),u(s("span",null," Range |",512),[[d,"custom"==n(T).value]])],512),[[d,n(il)[n(C)].includes("periodRange")]]),u(s("span",null,r(n(F)(n(P).start))+" | ",513),[[d,n(il)[n(C)].includes("month")]]),u(s("span",null,r(n(U).charAt(0).toUpperCase()+n(U).slice(1))+" data | ",513),[[d,n(il)[n(C)].includes("grossNet")]]),u(s("span",null,[n(O).length==n(R).length?(a(),t("span",ge,"All positions |")):(a(),t("span",pe,r(n(R).toString().charAt(0).toUpperCase()+n(R).toString().slice(1))+" |",1))],512),[[d,n(il)[n(C)].includes("positions")]]),u(s("span",null,r(n(J).charAt(0).toUpperCase()+n(J).slice(1))+" timeframe | ",513),[[d,n(il)[n(C)].includes("timeFrame")]]),u(s("span",null,["profitFactor"!=n(V)?(a(),t("span",me,r(n(V).toUpperCase()),1)):(a(),t("span",be,"Profit Factor")),o(" | ")],512),[[d,n(il)[n(C)].includes("ratio")]]),u(s("span",null,[n(z).length==n(j).length?(a(),t("span",he,"All tags")):(a(),t("span",fe,"Selected tags"))],512),[[d,n(il)[n(C)].includes("tags")]]),u(s("span",null,r("satisfaction"==n(_)?"Satisfaction":"P&L")+" calendar ",513),[[d,n(il)[n(C)].includes("plSatisfaction")]])]))]),u(s("div",Se,[u(s("div",ke,[s("select",{onInput:l[0]||(l[0]=e=>function(e){var l=D.filter(l=>l.value==e)[0];T.value=l;let a={};a.start=T.value.start,a.end=T.value.end,G.value=a}(e.target.value)),class:"form-select"},[(a(!0),t(i,null,v(n(D),e=>(a(),t("option",{key:e.value,value:e.value,selected:e.value==n(T).value},r(e.label),9,Ie))),128))],32)],512),[[d,"dashboard"==n(C)]]),u(s("div",we,[s("div",xe,[s("div",Ce,[s("input",{type:"date",class:"form-control",value:n(E)(n(G).start),selected:n(G).start,onInput:l[1]||(l[1]=e=>gl("start",e.target.value))},null,40,Ae)]),Ne,s("div",Te,[s("input",{type:"date",class:"form-control",value:n(E)(n(G).end),selected:n(G).end,onInput:l[2]||(l[2]=e=>gl("end",e.target.value))},null,40,Fe),Pe])])],512),[[d,"dashboard"==n(C)]]),u(s("div",Ue,[s("button",Oe,[o("Accounts "),s("span",Re,"("+r(n(N).length)+")",1)]),s("ul",Je,[(a(!0),t(i,null,v(n(A).accounts,e=>(a(),t("div",{key:e.value,class:"form-check"},[u(s("input",{class:"form-check-input",type:"checkbox",value:e.value,"onUpdate:modelValue":l[3]||(l[3]=e=>g(N)?N.value=e:null)},null,8,Ve),[[p,n(N)]]),o(" "+r(e.label),1)]))),128))])],512),[[d,"screenshots"!=n(C)&&"calendar"!=n(C)]]),u(s("div",ze,[s("input",{type:"month",class:"form-control",value:n(M)(n(P).start),selected:n(P).start,onInput:l[4]||(l[4]=e=>function(e){let l={};l.start=h.tz(e,X.value).unix(),l.end=h.tz(e,X.value).endOf("month").unix(),P.value=l}(e.target.value))},null,40,je)],512),[[d,"daily"==n(C)||"calendar"==n(C)]]),u(s("div",{class:m(["screenshots"==n(C)?"col-12":"col-6","dropdown mt-1 mt-lg-1"])},[s("button",_e,[o("Tags "),s("span",De,"("+r(n(j).length)+")",1)]),s("ul",Ee,[s("div",null,[s("a",{class:"pointerClass nav-link",onClick:hl},[n(ml)?(a(),t("span",Me,"Unselect All")):(a(),t("span",Ge,"Select All"))])]),Be,u(s("input",{class:"form-check-input mt-1",type:"checkbox",value:"t000t","onUpdate:modelValue":l[5]||(l[5]=e=>g(j)?j.value=e:null)},null,512),[[p,n(j)]]),o("  No Tag "),qe,(a(!0),t(i,null,v(n(B),e=>(a(),t("span",null,[s("h6",{class:"p-1 mb-0",style:b("background-color: "+e.color+";")},r(e.name),5),(a(!0),t(i,null,v(e.tags,e=>(a(),t("div",He,[u(s("input",{class:"form-check-input",type:"checkbox",value:e.id,"onUpdate:modelValue":l[6]||(l[6]=e=>g(j)?j.value=e:null)},null,8,Ke),[[p,n(j)]]),o(" "+r(e.name),1)]))),256))]))),256))])],2),[[d,"calendar"!=n(C)]]),u(s("div",Le,[s("select",{onInput:l[7]||(l[7]=e=>U.value=e.target.value),class:"form-select"},[(a(!0),t(i,null,v(n(q),e=>(a(),t("option",{key:e.value,value:e.value,selected:e.value==n(U)},r(e.label),9,Qe))),128))],32)],512),[[d,"screenshots"!=n(C)]]),u(s("div",Ye,[s("button",We,[o("Positions "),s("span",Xe,"("+r(n(R).length)+")",1)]),s("ul",Ze,[(a(!0),t(i,null,v(n(O),e=>(a(),t("div",{key:e.value,class:"form-check"},[u(s("input",{class:"form-check-input",type:"checkbox",value:e.value,"onUpdate:modelValue":l[8]||(l[8]=e=>g(R)?R.value=e:null)},null,8,$e),[[p,n(R)]]),o(" "+r(e.label),1)]))),128))])],512),[[d,"screenshots"!=n(C)&&"calendar"!=n(C)]]),u(s("div",el,[s("select",{onInput:l[9]||(l[9]=e=>J.value=e.target.value),class:"form-select"},[(a(!0),t(i,null,v(n(H),e=>(a(),t("option",{key:e.value,value:e.value,selected:e.value==n(J)},r(e.label),9,ll))),128))],32)],512),[[d,"dashboard"==n(C)]]),u(s("div",al,[s("select",{onInput:l[10]||(l[10]=e=>V.value=e.target.value),class:"form-select"},[(a(!0),t(i,null,v(n(K),e=>(a(),t("option",{key:e.value,value:e.value,selected:e.value==n(V)},r(e.label),9,tl))),128))],32)],512),[[d,"dashboard"==n(C)]]),u(s("div",{class:m(["daily"==n(C)?"col-4":"col-3"])},[s("select",{onInput:l[11]||(l[11]=e=>L.value=e.target.value),class:"form-select"},[(a(!0),t(i,null,v(n(Q),e=>(a(),t("option",{key:e.value,value:e.value,selected:e.value==n(_)},r(e.label),9,sl))),128))],32)],2),[[d,"calendar"==n(C)]]),s("div",nl,[s("button",{class:"btn btn-success btn-sm mt-2",onClick:pl},"Filter"),"dashboard"==n(C)?(a(),t("span",ol,[cl,s("ul",ul,[s("li",null,[s("a",{class:"dropdown-item",onClick:l[12]||(l[12]=e=>n(Y)("json",n(E)(n(G).start),n(E)(n(G).end),n(W)))},"JSON")]),s("li",null,[s("a",{class:"dropdown-item",onClick:l[13]||(l[13]=e=>n(Y)("csv",n(E)(n(G).start),n(E)(n(G).end),n(W)))},"CSV")])])])):c("",!0)])],512),[[d,n(rl)]])])]))}};export{dl as _};
