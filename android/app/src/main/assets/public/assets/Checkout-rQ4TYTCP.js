import{a as e,x as t,y as n,z as r,B as o,O as i,o as a}from"./vendor-CBBAIpTX.js";import{M as c,N as u,O as s,Q as l,R as d,S as p,T as f,U as m,u as v,c8 as h,b9 as w,c9 as y}from"./main-LE54y1pd.js";import"./capacitor-3Yedw1XA.js";import"./ui-Bs04w-Y-.js";var j,S="https://js.stripe.com/v3",b=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,x=function(e){var t=document.createElement("script");t.src="".concat(S).concat("");var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},E=null,g=null,P=null,k=function(e){return null!==E?E:(E=new Promise(function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe,window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(S,'"]')),t=0;t<e.length;t++){var n=e[t];if(b.test(n.src))return n}return null}();if(r&&e);else if(r){if(r&&null!==P&&null!==g){var o;r.removeEventListener("load",P),r.removeEventListener("error",g),null===(o=r.parentNode)||void 0===o||o.removeChild(r),r=x()}}else r=x();P=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),g=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(n),r.addEventListener("load",P),r.addEventListener("error",g)}catch(i){return void n(i)}else t(null)})).catch(function(e){return E=null,Promise.reject(e)})},C=function(){return j||(j=k(null).catch(function(e){return j=null,Promise.reject(e)}))};Promise.resolve().then(function(){return C()}).catch(function(e){});const T={class:"row justify-content-md-center"},L={class:"col-12 col-md-8 text-center"},N=o("p",null,"Your trial period has expired.",-1),_=o("p",null,"We hope you enjoyed using TradeNote. Please consider subscribing to continue enjoying TradeNote and supporting the project.",-1),O=[o("div",{id:"checkout"},null,-1)],W={__name:"Checkout",setup(j){c.extend(u),c.extend(s),c.extend(l),c.extend(d),c.extend(p),c.extend(f),c.extend(m);const S=e(null);t(async()=>{await v();try{await h(w.value),window.location.replace("/dashboard")}catch(e){let t=await y();S.value=await function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0;var r=Date.now();return C().then(function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.1.0",startTime:t})}(r,n),r}(e,t,r)})}(t),b()}}),n(async()=>{});const b=async()=>{(await S.value.initEmbeddedCheckout({fetchClientSecret:async()=>{const e=await fetch("/api/create-checkout-session",{method:"POST"}),{clientSecret:t}=await e.json();return t}})).mount("#checkout")};return(e,t)=>(a(),r("div",T,[o("div",L,[N,_,o("form",{id:"payment-form",onSubmit:t[0]||(t[0]=i((...t)=>e.handleSubmit&&e.handleSubmit(...t),["prevent"]))},O,32)])]))}};export{W as default};
