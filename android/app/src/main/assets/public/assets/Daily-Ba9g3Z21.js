import{a as e,x as a,y as t,z as s,f as l,u as n,G as o,J as d,K as r,B as c,F as u,H as p,E as m,C as v,D as b,P as y,Q as g,O as h,M as f,I as x,o as w}from"./vendor-CBBAIpTX.js";import{_ as k}from"./Filters-D1RZRgVH.js";import{N as P}from"./NoData-D49iXMWo.js";import{_ as C}from"./SpinnerLoadingPage-SCQtX8pf.js";import{_ as T}from"./Calendar-BbC3UMFo.js";import{M as L,N as I,O as S,Q as U,R as M,S as A,T as N,U as D,V,W as j,X as E,Y as F,Z as O,$ as Q,a0 as B,a1 as _,a2 as K,a3 as z,g as H,a4 as W,a5 as X,f as q,a6 as G,a7 as J,a8 as R,a9 as Y,aa as Z,ab as $,ac as ee,ad as ae,ae as te,af as se,ag as le,m as ne,ah as oe,K as ie,i as de,ai as re,P as ce,aj as ue,ak as pe,al as me,am as ve,an as be,ao as ye,ap as ge,aq as he,ar as fe,as as xe,at as we,au as ke,av as Pe,aw as Ce,ax as Te,G as Le,ay as Ie,az as Se,aA as Ue,aB as Me,d as Ae,aC as Ne,B as De,C as Ve,aD as je,aE as Ee,aF as Fe,o as Oe,v as Qe,aG as Be,aH as _e,aI as Ke,aJ as ze,aK as He,aL as We,aM as Xe,aN as qe,L as Ge,aO as Je,aP as Re,aQ as Ye,aR as Ze,aS as $e,aT as ea,aU as aa,aV as ta,aW as sa,aX as la}from"./main-LE54y1pd.js";import"./capacitor-3Yedw1XA.js";import"./ui-Bs04w-Y-.js";const na={key:0,class:"row mt-2 mb-2"},oa={key:0},ia={class:"row"},da={class:"col-12 col-xl-8"},ra={class:"row mt-2"},ca={class:"col-12"},ua={class:"dailyCard"},pa={class:"row"},ma={class:"col-12 cardFirstLine mb-2"},va={class:"row"},ba={class:"col-12 col-lg-auto"},ya=["onClick"],ga=["onClick"],ha=["data-index"],fa={class:"col-12 col-lg-auto ms-auto"},xa=["data-index"],wa={class:"col-12 d-flex align-items-center text-center"},ka={class:"row"},Pa={class:"col-12 col-lg-6"},Ca={class:"row"},Ta={class:"col-4"},La=["id"],Ia={class:"col-8 chartCard"},Sa=["id"],Ua={class:"col-12 col-lg-6"},Ma={class:"row"},Aa={class:"col row"},Na=c("label",null,"Executions",-1),Da=c("label",null,"Trades",-1),Va={class:"col row"},ja=c("label",null,"Wins",-1),Ea=c("label",null,"Losses",-1),Fa={class:"col row"},Oa=c("label",null,"Tot Fees",-1),Qa=c("label",null,"P&L(g)",-1),Ba={key:0,class:"col-12 table-responsive"},_a={class:"nav nav-tabs mb-2",id:"nav-tab",role:"tablist"},Ka=["id","data-bs-target"],za=["id","data-bs-target"],Ha=["id","data-bs-target"],Wa={key:0,class:"txt-small"},Xa=["id","data-bs-target"],qa={class:"tab-content",id:"nav-tabContent"},Ga=["id"],Ja={class:"table"},Ra=c("thead",null,[c("tr",null,[c("th",{scope:"col"},"Symbol"),c("th",{scope:"col"},[v("Vol"),c("i",{class:"ps-1 uil uil-info-circle","data-bs-toggle":"tooltip","data-bs-title":"Total number of securities during the trade (bought + sold or shorted + covered)"})]),c("th",{scope:"col"},"Position"),c("th",{scope:"col"},"Entry"),c("th",{scope:"col"},[v("P&L/Sec"),c("i",{class:"ps-1 uil uil-info-circle","data-bs-toggle":"tooltip","data-bs-title":"Profit&Loss per unit of security traded (baught or shorted)"})]),c("th",{scope:"col"},"P&L(n)"),c("th",{scope:"col"},"Tags"),c("th",{scope:"col"},"Note"),c("th",{scope:"col"}),c("th",{scope:"col"})])],-1),Ya=["data-index","data-indextwo"],Za={key:0},$a={key:0},et=["data-bs-title"],at={key:1},tt=["data-bs-title"],st={key:1},lt={key:0},nt=["data-bs-title"],ot={key:0},it={key:1},dt={key:0},rt={key:0},ct={key:1},ut={key:0},pt=[c("i",{class:"greenTrade uil uil-thumbs-up"},null,-1)],mt={key:1},vt=[c("i",{class:"redTrade uil uil-thumbs-down"},null,-1)],bt={key:0},yt=[c("i",{class:"uil uil-image-v"},null,-1)],gt=["id"],ht=["id"],ft=c("thead",null,[c("tr",null,[c("th",{scope:"col"},"Symbol"),c("th",{scope:"col"},"Vol"),c("th",{scope:"col"},"P&L(g)"),c("th",{scope:"col"},"Tot Fees"),c("th",{scope:"col"},"P&L(n)"),c("th",{scope:"col"},"Wins"),c("th",{scope:"col"},"Losses"),c("th",{scope:"col"},"Trades"),c("th",{scope:"col"},"Executions")])],-1),xt=["id"],wt={class:"text-center spinnerHeigth"},kt=[c("div",{class:"spinner-border text-blue",role:"status"},null,-1)],Pt={class:"mb-2"},Ct=["id"],Tt=["innerHTML"],Lt={class:"col-12 col-xl-4 text-center mt-2 align-self-start"},It={class:"dailyCard calCard"},St={class:"row"},Ut={key:0,class:"d-flex justify-content-center mt-3"},Mt=[c("div",{class:"spinner-border text-blue",role:"status"},null,-1)],At={class:"modal fade",id:"tradesModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Nt={class:"modal-dialog modal-xl"},Dt={class:"modal-content"},Vt={key:0},jt={key:0},Et={id:"candlestickChart",class:"candlestickClass"},Ft={class:"mt-3 table-responsive"},Ot={class:"table"},Qt=c("thead",null,[c("tr",null,[c("th",{scope:"col"},"Symbol"),c("th",{scope:"col"},"Vol"),c("th",{scope:"col"},"Position"),c("th",{scope:"col"},"Entry"),c("th",{scope:"col"},"Price"),c("th",{scope:"col"},"Exit"),c("th",{scope:"col"},"Price"),c("th",{scope:"col"},"Duration"),c("th",{scope:"col"},"P&L/Vol"),c("th",{scope:"col"},"P/L(n)")])],-1),Bt={key:0},_t={key:0},Kt=["data-bs-title"],zt={key:1},Ht=["data-bs-title"],Wt={key:1},Xt={key:0},qt=["data-bs-title"],Gt={key:0},Jt={key:1},Rt={key:2},Yt={key:0},Zt=["data-bs-title"],$t={key:0},es={key:1},as={key:0},ts={key:1},ss={key:2},ls={key:0},ns={key:1},os={key:0},is={key:1},ds={key:0},rs={key:1},cs={key:0},us={class:"mt-1 mb-2 row align-items-center ms-1 me-1 tradeSetup"},ps={class:"col-12"},ms={class:"row"},vs={class:"col-12"},bs={class:"row align-items-center"},ys={class:"col-1"},gs={class:"container-tags col-8"},hs={class:"form-control dropdown form-select",style:{height:"auto"}},fs={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},xs=["onClick"],ws=c("span",{class:"remove-tag"},"×",-1),ks=["onClick"],Ps={class:"ms-2"},Cs={class:"col-3"},Ts=["value"],Ls={class:"col-12 mt-2"},Is=["value"],Ss={class:"col-12 mt-3"},Us={class:"col-12 mt-3"},Ms={class:"row"},As={class:"col-4 text-start"},Ns=["disabled"],Ds=[c("i",{class:"fa fa-chevron-left me-2"},null,-1)],Vs={class:"col-4 text-center"},js={class:"ms-auto col-4 text-end"},Es=["disabled"],Fs=[c("i",{class:"fa fa-chevron-right ms-2"},null,-1)],Os={class:"col-12"},Qs=[c("div",{class:"d-flex justify-content-center"},[c("div",{class:"spinner-border spinner-border-sm text-blue",role:"status"})],-1)],Bs=c("hr",null,null,-1),_s={class:"modal fade",id:"tagsModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ks={class:"modal-dialog modal-xl"},zs={class:"modal-content"},Hs={class:"container col mt-4"},Ws={class:"form-control dropdown form-select",style:{height:"auto"}},Xs={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},qs=["onClick"],Gs=c("span",{class:"remove-tag"},"×",-1),Js=["onClick"],Rs={class:"ms-2"},Ys={class:"col text-center mt-4 mb-4"},Zs={__name:"Daily",setup(Le){L.extend(I),L.extend(S),L.extend(U),L.extend(M),L.extend(A),L.extend(N),L.extend(D);let Zs,$s,el,al=null,tl=null,sl=[];const ll=e(null),nl=e(-1),ol=e(null),il=e(null);a(async()=>{}),t(async()=>{await V(),await j(),E(),al=new bootstrap.Modal("#tradesModal"),document.getElementById("tradesModal").addEventListener("shown.bs.modal",async e=>{const a=e.relatedTarget,t=a.dataset.index,s=a.dataset.indextwo;cl(t,s,s)}),tl=new bootstrap.Modal("#tagsModal"),document.getElementById("tagsModal").addEventListener("shown.bs.modal",async e=>{const a=e.relatedTarget.dataset.index;ul(a)})});let dl=!1,rl=!0;async function cl(e,a,t){if(1!=F.value)if(await(O.value=!0),Q.value&&(await B(),await _()),K.value&&await async function(){return new Promise(async(e,a)=>{if(null!=re.stopLoss||null!=re.maePrice||null!=re.mfePrice){O.value=!0;const e=ce.Object.extend("excursions"),a=new ce.Query(e);a.equalTo("tradeId",ue.value);const t=await a.first();if(t)pe.value="Updating",t.set("stopLoss",null==re.stopLoss||""==re.stopLoss?null:re.stopLoss),t.set("maePrice",null==re.maePrice||""==re.maePrice?null:re.maePrice),t.set("mfePrice",null==re.mfePrice||""==re.mfePrice?null:re.mfePrice),t.save().then(async()=>{await me(),await ve()},e=>{});else{pe.value="Saving";const a=new e;a.set("user",ce.User.current()),a.set("stopLoss",null==re.stopLoss||""==re.stopLoss?null:re.stopLoss),a.set("maePrice",null==re.maePrice||""==re.maePrice?null:re.maePrice),a.set("mfePrice",null==re.mfePrice||""==re.mfePrice?null:re.mfePrice),a.set("dateUnix",be.value),a.set("tradeId",ue.value),a.setACL(new ce.ACL(ce.User.current())),a.save().then(async e=>{await me(),await ve(),ye.value=ue.value},e=>{})}}e()})}(),z.value&&(await Promise.all([H(),W()]),await Promise.all([X(),q()]),E()),G.value&&await J(),Q.value=!1,K.value=!1,G.value=!1,z.value=!1,R.value=!1,void 0===e&&void 0===a&&void 0===t)await(O.value=!1),Y.value=void 0,Z.value=void 0,$.value=void 0,Q.value=!1,K.value=!1,G.value=!1,z.value=!1,R.value=!1,al.hide(),await(ee.value=!1),await ae("daily"),dl=!1,rl=!0;else{Y.value=Number(e),Z.value=Number(a),$.value=Number(t),nl.value=-1;let s=te.findIndex(e=>"databento"===e.provider),l=te.findIndex(e=>"polygon"===e.provider);s>-1&&""!=te[s].key?(nl.value=s,il.value="databento"):l>-1&&""!=te[l].key&&(nl.value=l,il.value="polygon");let n=async()=>{if(ee.value=!0,!1===dl){let a=ie[e].dateUnix;(0==he.length||he.length>0&&he[0].dateUnixDay!=a)&&await fe(!0,a),dl=!0}let a=ie[Y.value].trades[t].id;await Promise.all([yl(),xe()]);let l=he.find(e=>e.name==a);for(let e in we)delete we[e];if(ll.value=null,l)for(let e in l)we[e]=l[e];else if(we.side=null,we.type=null,-1!=nl.value){ol.value=te[nl.value].key;let e=ie[Y.value].trades[t];if(ol.value)if("future"!=e.type||-1!==s&&""!==te[s].key)try{let a,t,s;if(ll.value=null,0==sl.length)await hl(e.td,e.symbol,e.type),a=sl[0].ohlcTimestamps,t=sl[0].ohlcPrices,s=sl[0].ohlcVolumes;else{let l=sl.findIndex(a=>a.date==e.td&&a.symbol==e.symbol);if(-1!=l)a=sl[l].ohlcTimestamps,t=sl[l].ohlcPrices,s=sl[l].ohlcVolumes;else{await hl(e.td,e.symbol,e.type);let l=sl.findIndex(a=>a.date===e.td&&a.symbol===e.symbol);-1!=l&&(a=sl[l].ohlcTimestamps,t=sl[l].ohlcPrices,s=sl[l].ohlcVolumes)}}await ke(a,t,s,e,rl),rl=!1}catch(d){d.response&&429===d.response.status?ll.value="Too many requests, try again later":d.response?ll.value=d.response.statusText:ll.value=d}else ll.value="You need a Databento API for Futures.";else ll.value="Missing API Key. To see your entry and exist on a chart, insert your API key in settings."}else ll.value="Missing API Key. To see your entry and exist on a chart, insert your API key in settings.";let n=oe.find(e=>e.tradeId==a);n&&n.tags.forEach(e=>{for(let a of de)for(let t of a.tags)if(t.id===e){let e={};e.id=t.id,e.name=t.name,ne.push(e)}});let o=Pe.findIndex(e=>e.tradeId==a);Ce.value=null,-1!=o&&(Ce.value=Pe[o].note);let i=Te.filter(e=>e.tradeId==a);i.length&&(null!=i[0].stopLoss&&(re.stopLoss=i[0].stopLoss),null!=i[0].maePrice&&(re.maePrice=i[0].maePrice),null!=i[0].mfePrice&&(re.mfePrice=i[0].mfePrice)),i.length&&(null!=i[0].stopLoss&&(re.stopLoss=i[0].stopLoss),null!=i[0].maePrice&&(re.maePrice=i[0].maePrice),null!=i[0].mfePrice&&(re.mfePrice=i[0].mfePrice))};await n(),await(O.value=!1),se.value="",le.value=!1,await j()}else alert("Please save your screenshot annotation")}const ul=e=>{Y.value=Number(e),ne.length=0;let a=oe.find(e=>e.tradeId==ie[Y.value].dateUnix);a&&a.tags.forEach(e=>{for(let a of de)for(let t of a.tags)if(t.id===e){let e={};e.id=t.id,e.name=t.name,ne.push(e)}})},pl=async()=>{ne.length=0,tl.hide()},ml=(e,a)=>{let t=L(1e3*e).tz(Ie.value),s=L(1e3*a).tz(Ie.value);return t.isSame(s,"day")};async function vl(e,a){Zs=e.id,el=e.td,$s=a,e.satisfaction=$s,await async function(){return new Promise(async(e,a)=>{const t=ce.Object.extend("satisfactions"),s=new ce.Query(t);s.equalTo("tradeId",Zs);const l=await s.first();if(l)l.set("satisfaction",$s),l.save().then(async()=>{},e=>{});else{const e=new t;e.set("user",ce.User.current()),e.set("dateUnix",el),e.set("tradeId",Zs),e.set("satisfaction",$s),e.setACL(new ce.ACL(ce.User.current())),e.save().then(async e=>{},e=>{})}e()})}()}function bl(){K.value=!0,le.value=!0}function yl(){for(let e in re)delete re[e];re.stopLoss=null,re.maePrice=null,re.mfePrice=null}const gl=(e,a)=>{let t=[];for(let s=0;s<e.trades.length;s++){const l=e.trades[s];let n=[];n=a?he:Ke;for(let a=0;a<n.length;a++){const s=n[a];(s.name==l.id&&-1==t.findIndex(e=>e==s)||la(s.dateUnix)==e.dateUnix&&-1==t.findIndex(e=>e==s))&&t.push(s)}}return t};function hl(e,a,t){if("databento"===il.value)return new Promise(async(s,l)=>{let n={};n.symbol=a;let o,d=n.symbol,r="raw_symbol",c=L(1e3*e).tz(Ie.value).endOf("day").unix();n.ohlcv=[],"future"===t?(o="GLBX.MDP3",d=n.symbol+".c.0",r="continuous"):"stock"===t?o="XNAS.ITCH":"call"===tradedSymbols[i].secType||"put"===tradedSymbols[i].secType||tradedSymbols[i].secType;let u={dataset:o,stype_in:r,symbols:d,schema:"ohlcv-1m",start:1e9*e,end:1e9*c,encoding:"csv",pretty_px:"true",pretty_ts:"true",map_symbols:"true",username:ol.value};Ae.post("/api/databento",u).then(async t=>{let l=await Ne(t.data,n),o={};o.date=e,o.symbol=a,o.ohlcTimestamps=[],o.ohlcPrices=[],o.ohlcVolumes=[];for(let e=0;e<l.ohlcv.length;e++){const a=l.ohlcv[e];let t=[];o.ohlcTimestamps.push(a.t),t.push(a.c),t.push(a.o),t.push(a.l),t.push(a.h),o.ohlcPrices.push(t),o.ohlcVolumes.push(a.v)}sl.push(o),s()}).catch(e=>{l(e)})});if("polygon"===il.value){let s;return s="put"===t||"call"===t||"option"===t?"O:"+a:"future"===t?"I:"+a:"forex"===t?"C:"+a:"crypto"===t?"X:"+a:a,new Promise(async(t,l)=>{await Ae.get("https://api.polygon.io/v2/aggs/ticker/"+s+"/range/1/minute/"+Me(e)+"/"+Me(e)+"?adjusted=true&sort=asc&limit=50000&apiKey="+ol.value).then(t=>{let s={};s.date=e,s.symbol=a,s.ohlcTimestamps=[],s.ohlcPrices=[],s.ohlcVolumes=[];let l={};l.symbol=a,l.ohlcv=t.data.results;for(let e=0;e<t.data.results.length;e++){const a=t.data.results[e];let l=[];s.ohlcTimestamps.push(a.t),l.push(a.c),l.push(a.o),l.push(a.l),l.push(a.h),s.ohlcPrices.push(l),s.ohlcVolumes.push(a.v)}sl.push(s)}).catch(e=>{l(e)}).finally(function(){}),t()})}}return(e,a)=>(w(),s(u,null,[l(C),!n(De)&&n(ie)?(w(),s("div",na,[l(k),n(Ve)?o("",!0):(w(),s("div",oa,[l(P)])),d(c("div",null,[c("div",ia,[c("div",da,[(w(!0),s(u,null,p(n(ie),(e,a)=>{return w(),s("div",ra,[c("div",ca,[c("div",ua,[c("div",pa,[c("div",ma,[c("div",va,[c("div",ba,[v(m(n(je)(e.dateUnix))+" ",1),c("i",{onClick:a=>n(Ee)(e.dateUnix,!0,e),class:b([1==e.satisfaction?"greenTrade":"","uil","uil-thumbs-up","ms-2","me-1","pointerClass"])},null,10,ya),c("i",{onClick:a=>n(Ee)(e.dateUnix,!1,e),class:b([0==e.satisfaction?"redTrade":"",,"uil","uil-thumbs-down","pointerClass"])},null,10,ga),d(c("i",{"data-bs-toggle":"modal","data-bs-target":"#tagsModal","data-index":a,class:"ms-2 uil uil-tag-alt pointerClass"},null,8,ha),[[r,0==n(oe).filter(a=>a.tradeId==e.dateUnix.toString()).length||n(oe).filter(a=>a.tradeId==e.dateUnix.toString()).length>0&&0===n(oe).filter(a=>a.tradeId==e.dateUnix.toString())[0].tags.length]])]),c("div",fa,[v("P&L("+m(n(Fe).charAt(0))+"): ",1),c("span",{class:b([e.pAndL[n(Oe)+"Proceeds"]>0?"greenTrade":"redTrade"])},m(n(Qe)(e.pAndL[n(Oe)+"Proceeds"])),3)])]),c("div",null,[(w(!0),s(u,null,p(n(oe).filter(a=>a.tradeId==e.dateUnix.toString()),e=>(w(),s("span",null,[(w(!0),s(u,null,p(e.tags.slice(0,7),e=>(w(),s("span",{class:"tag txt-small pointerClass",style:x({"background-color":n(Be)(e).groupColor}),"data-bs-toggle":"modal","data-bs-target":"#tagsModal","data-index":a},m(n(Be)(e).tagName),13,xa))),256)),d(c("span",null,"+"+m(e.tags.length-7),513),[[r,e.tags.length>7]])]))),256))])]),c("div",wa,[c("div",ka,[c("div",Pa,[c("div",Ca,[c("div",Ta,[c("div",{id:"pieChart"+e.dateUnix,class:"chartIdDailyClass"},null,8,La)]),c("div",Ia,[c("div",{id:"doubleLineChart"+e.dateUnix,class:"chartIdDailyClass"},null,8,Sa)])])]),c("div",Ua,[c("div",Ma,[c("div",Aa,[c("div",null,[Na,c("p",null,m(e.pAndL.executions),1)]),c("div",null,[Da,c("p",null,m(e.pAndL.trades),1)])]),c("div",Va,[c("div",null,[ja,c("p",null,m(e.pAndL.grossWinsCount),1)]),c("div",null,[Ea,c("p",null,m(e.pAndL.grossLossCount),1)])]),c("div",Fa,[c("div",null,[Oa,c("p",null,m(n(Qe)(e.pAndL.fees)),1)]),c("div",null,[Qa,c("p",null,m(n(Qe)(e.pAndL.grossProceeds)),1)])])])])])]),n(ee)?o("",!0):(w(),s("div",Ba,[c("nav",null,[c("div",_a,[c("button",{class:"nav-link",id:"trades-"+a,"data-bs-toggle":"tab","data-bs-target":"#tradesNav-"+a,type:"button",role:"tab","aria-controls":"nav-overview","aria-selected":"true"},"Trades ",8,Ka),c("button",{class:"nav-link",id:"blotter-"+a,"data-bs-toggle":"tab","data-bs-target":"#blotterNav-"+a,type:"button",role:"tab","aria-controls":"nav-overview","aria-selected":"true"},"Blotter ",8,za),c("button",{id:"screenshots-"+a,"data-bs-toggle":"tab","data-bs-target":"#screenshotsNav-"+a,type:"button",role:"tab","aria-controls":"nav-overview","aria-selected":"true",class:b([gl(e).length>0?"":"noDataTab","nav-link"])},[v("Screenshots"),gl(e).length>0?(w(),s("span",Wa," ("+m(gl(e).length)+")",1)):o("",!0)],10,Ha),c("button",{id:"diaries-"+a,"data-bs-toggle":"tab","data-bs-target":"#diariesNav-"+a,type:"button",role:"tab","aria-controls":"nav-overview","aria-selected":"true",class:b([(t=e.dateUnix,qe.filter(e=>e.dateUnix==t)).length>0?"":"noDataTab","nav-link"])},"Diary ",10,Xa)])]),c("div",qa,[c("div",{class:"tab-pane fade txt-small",id:"tradesNav-"+a,role:"tabpanel","aria-labelledby":"nav-overview-tab"},[c("table",Ja,[Ra,c("tbody",null,[(w(!0),s(u,null,p(e.trades,(e,t)=>(w(),s("tr",{"data-bs-toggle":"modal","data-bs-target":"#tradesModal",class:"pointerClass","data-index":a,"data-indextwo":t},[c("td",null,m(e.symbol),1),c("td",null,m(e.buyQuantity+e.sellQuantity),1),c("td",null,m(e.strategy.charAt(0).toUpperCase()+e.strategy.slice(1)),1),c("td",null,[0==e.tradesCount?(w(),s("span",Za,[e.openPosition?(w(),s("span",$a,[v("Open"),c("i",{class:"ps-1 uil uil-info-circle","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-title":"Swing trade opened on "+n(Me)(e.entryTime)},null,8,et)])):(w(),s("span",at,[v("Closed"),c("i",{class:"ps-1 uil uil-info-circle","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-title":"Swing trade closed on "+n(Me)(e.exitTime)},null,8,tt)]))])):(w(),s("span",st,[v(m(n(_e)(e.entryTime)),1),0==ml(e.td,e.entryTime)?(w(),s("span",lt,[c("i",{class:"ps-1 uil uil-info-circle","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-title":"Swing trade from "+n(Me)(e.entryTime)},null,8,nt)])):o("",!0)]))]),c("td",null,[0==e.tradesCount?(w(),s("span",ot)):"forex"==e.type?(w(),s("span",it,"-")):(w(),s("span",{key:2,class:b([e.grossSharePL>0?"greenTrade":"redTrade"])},m(n(Qe)(e.grossSharePL)),3))]),c("td",null,[0==e.tradesCount?(w(),s("span",dt)):(w(),s("span",{key:1,class:b([e.netProceeds>0?"greenTrade":"redTrade"])},m(n(Qe)(e.netProceeds)),3))]),c("td",null,[(w(!0),s(u,null,p(n(oe).filter(a=>a.tradeId==e.id),e=>(w(),s("span",null,[(w(!0),s(u,null,p(e.tags.slice(0,2),e=>(w(),s("span",{class:"tag txt-small",style:x({"background-color":n(Be)(e).groupColor})},m(n(Be)(e).tagName),5))),256)),d(c("span",null,"+"+m(e.tags.length-2),513),[[r,e.tags.length>2]])]))),256))]),c("td",null,[(w(!0),s(u,null,p(n(Pe).filter(a=>a.tradeId==e.id),e=>(w(),s("span",null,[e.note.length>12?(w(),s("span",rt,m(e.note.substring(0,12))+"...",1)):(w(),s("span",ct,m(e.note),1))]))),256))]),c("td",null,[1==e.satisfaction?(w(),s("span",ut,pt)):o("",!0),0==e.satisfaction?(w(),s("span",mt,vt)):o("",!0)]),c("td",null,[-1!=n(Ke).findIndex(a=>a.name==e.id)?(w(),s("span",bt,yt)):o("",!0)])],8,Ya))),256))])])],8,Ga),c("div",{class:"tab-pane fade txt-small",id:"blotterNav-"+a,role:"tabpanel","aria-labelledby":"nav-overview-tab"},[c("table",{id:"table"+a,class:"table"},[ft,c("tbody",null,[(w(!0),s(u,null,p(e.blotter,e=>(w(),s("tr",null,[c("td",null,m(e.symbol),1),c("td",null,m(n(ze)(e.buyQuantity,e.sellQuantity)),1),c("td",{class:b([e.grossProceeds>0?"greenTrade":"redTrade"])},m(n(Qe)(e.grossProceeds)),3),c("td",null,m(n(Qe)(e.fees)),1),c("td",{class:b([e[n(Oe)+"Proceeds"]>0?"greenTrade":"redTrade"])},m(n(Qe)(e.netProceeds)),3),c("td",null,m(e.grossWinsCount),1),c("td",null,m(e.grossLossCount),1),c("td",null,m(e.trades),1),c("td",null,m(e.executions),1)]))),256))])],8,ht)],8,gt),c("div",{class:"tab-pane fade txt-small",id:"screenshotsNav-"+a,role:"tabpanel","aria-labelledby":"nav-overview-tab"},[d(c("div",wt,kt,512),[[r,"screenshots"==n(He)&&n(We)==a&&n(Xe)]]),gl(e).length>0&&"screenshots"==n(He)&&n(We)==a?(w(!0),s(u,{key:0},p(gl(e,e.dateUnix),e=>(w(),s("div",null,[c("span",Pt,[l(ge,{"screenshot-data":e,"show-title":"",source:"dailyTab"},null,8,["screenshot-data"])])]))),256)):o("",!0)],8,xt),c("div",{class:"tab-pane fade",id:"diariesNav-"+a,role:"tabpanel","aria-labelledby":"nav-overview-tab"},[(w(!0),s(u,null,p(n(qe).filter(a=>a.dateUnix==e.dateUnix),e=>(w(),s("div",null,[c("p",{innerHTML:e.diary},null,8,Tt)]))),256))],8,Ct)])]))])])])]);var t}),256))]),d(c("div",Lt,[c("div",It,[c("div",St,[l(T)])])],512),[[r,n(Ge)&&!n(De)]])]),n(Je)?(w(),s("div",Ut,Mt)):o("",!0)],512),[[r,n(Ve)]])])):o("",!0),c("div",At,[c("div",Nt,[c("div",Dt,[n(ee)?(w(),s("div",Vt,[n(we).originalBase64?(w(),s("div",jt,[l(ge,{"screenshot-data":n(we),source:"dailyModal"},null,8,["screenshot-data"])])):o("",!0),d(c("div",Et,null,512),[[r,!ll.value&&!n(we).originalBase64]]),d(c("div",{class:"container mt-2 text-center"},m(ll.value),513),[[r,ll.value]]),c("div",Ft,[c("table",Ot,[Qt,c("tbody",null,[c("tr",null,[c("td",null,m(n(ie)[n(Y)].trades[n($)].symbol),1),c("td",null,m(n(ie)[n(Y)].trades[n($)].buyQuantity+n(ie)[n(Y)].trades[n($)].sellQuantity),1),c("td",null,m("B"==n(ie)[n(Y)].trades[n($)].side?"Long":"Short"),1),c("td",null,[0==n(ie)[n(Y)].trades[n($)].tradesCount?(w(),s("span",Bt,[n(ie)[n(Y)].trades[n($)].openPosition?(w(),s("span",_t,[v("Open"),c("i",{class:"ps-1 uil uil-info-circle","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-title":"Swing trade opened on "+n(Me)(n(ie)[n(Y)].trades[n($)].entryTime)},null,8,Kt)])):(w(),s("span",zt,[v("Closed"),c("i",{class:"ps-1 uil uil-info-circle","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-title":"Swing trade closed on "+n(Me)(n(ie)[n(Y)].trades[n($)].exitTime)},null,8,Ht)]))])):(w(),s("span",Wt,[v(m(n(_e)(n(ie)[n(Y)].trades[n($)].entryTime)),1),0==ml(n(ie)[n(Y)].trades[n($)].td,n(ie)[n(Y)].trades[n($)].entryTime)?(w(),s("span",Xt,[c("i",{class:"ps-1 uil uil-info-circle","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-title":"Swing trade from "+n(Me)(n(ie)[n(Y)].trades[n($)].entryTime)},null,8,qt)])):o("",!0)]))]),c("td",null,[0==n(ie)[n(Y)].trades[n($)].tradesCount?(w(),s("span",Gt)):"forex"==n(ie)[n(Y)].trades[n($)].type?(w(),s("span",Jt,m(n(ie)[n(Y)].trades[n($)].entryPrice.toFixed(5)),1)):(w(),s("span",Rt,[v(m(n(Qe)(n(ie)[n(Y)].trades[n($)].entryPrice)),1),0==ml(n(ie)[n(Y)].trades[n($)].td,n(ie)[n(Y)].trades[n($)].entryTime)?(w(),s("span",Yt,[c("i",{class:"ps-1 uil uil-info-circle","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-title":"Swing trade from "+n(Me)(n(ie)[n(Y)].trades[n($)].entryTime)},null,8,Zt)])):o("",!0)]))]),c("td",null,[0==n(ie)[n(Y)].trades[n($)].tradesCount?(w(),s("span",$t)):(w(),s("span",es,m(n(_e)(n(ie)[n(Y)].trades[n($)].exitTime)),1))]),c("td",null,[0==n(ie)[n(Y)].trades[n($)].tradesCount?(w(),s("span",as)):"forex"==n(ie)[n(Y)].trades[n($)].type?(w(),s("span",ts,m(n(ie)[n(Y)].trades[n($)].exitPrice.toFixed(5)),1)):(w(),s("span",ss,m(n(Qe)(n(ie)[n(Y)].trades[n($)].exitPrice)),1))]),c("td",null,[0==n(ie)[n(Y)].trades[n($)].tradesCount?(w(),s("span",ls)):(w(),s("span",ns,[0==ml(n(ie)[n(Y)].trades[n($)].td,n(ie)[n(Y)].trades[n($)].entryTime)?(w(),s("span",os,m(n(Re)(n(ie)[n(Y)].trades[n($)].exitTime-n(ie)[n(Y)].trades[n($)].entryTime)),1)):(w(),s("span",is,m(n(Ye)(n(ie)[n(Y)].trades[n($)].exitTime-n(ie)[n(Y)].trades[n($)].entryTime)),1))]))]),c("td",null,[0==n(ie)[n(Y)].trades[n($)].tradesCount?(w(),s("span",ds)):"forex"==n(ie)[n(Y)].trades[n($)].type?(w(),s("span",rs)):(w(),s("span",{key:2,class:b([n(ie)[n(Y)].trades[n($)].grossSharePL>0?"greenTrade":"redTrade"])},m(n(Qe)(n(ie)[n(Y)].trades[n($)].grossSharePL)),3))]),c("td",null,[0==n(ie)[n(Y)].trades[n($)].tradesCount?(w(),s("span",cs)):(w(),s("span",{key:1,class:b([n(ie)[n(Y)].trades[n($)].netProceeds>0?"greenTrade":"redTrade"])},m(n(Qe)(n(ie)[n(Y)].trades[n($)].netProceeds)),3))])])])])]),c("div",us,[c("div",ps,[c("div",ms,[d(c("div",vs,[c("div",bs,[c("div",ys,[c("i",{onClick:a[0]||(a[0]=e=>vl(n(ie)[n(Y)].trades[n($)],!0)),class:b([1==n(ie)[n(Y)].trades[n($)].satisfaction?"greenTrade":"","uil","uil-thumbs-up","pointerClass","me-1"])},null,2),c("i",{onClick:a[1]||(a[1]=e=>vl(n(ie)[n(Y)].trades[n($)],!1)),class:b([0==n(ie)[n(Y)].trades[n($)].satisfaction?"redTrade":"","uil","uil-thumbs-down","pointerClass"])},null,2)]),c("div",gs,[c("div",hs,[c("div",fs,[(w(!0),s(u,null,p(n(ne),(e,a)=>(w(),s("span",{key:a,class:"tag txt-small",style:x({"background-color":n(Be)(e.id).groupColor}),onClick:e=>n(Ze)("remove",a)},[v(m(e.name),1),ws],12,xs))),128)),d(c("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>y(se)?se.value=e:null),onInput:a[3]||(a[3]=(...e)=>n($e)&&n($e)(...e)),onKeydown:[a[4]||(a[4]=g(h(e=>n(Ze)("add",n(se)),["prevent"]),["enter"])),a[5]||(a[5]=g(h(e=>n(Ze)("add",n(se)),["prevent"]),["tab"]))],class:"form-control tag-input",placeholder:"Add a tag"},null,544),[[f,n(se)]]),c("div",{class:"clickable-area",onClick:a[6]||(a[6]=(...e)=>n(ea)&&n(ea)(...e))})])]),c("ul",{id:"dropdown-menu-tags",class:"dropdown-menu-tags",style:x([n(R)?"":"border: none;"])},[(w(!0),s(u,null,p(n(de),e=>d((w(),s("span",null,[d(c("h6",{class:"p-1 mb-0",style:x("background-color: "+e.color+";")},m(e.name),5),[[r,n(aa)(e.id).filter(a=>a.id==e.id)[0].tags.length>0]]),(w(!0),s(u,null,p(n(aa)(e.id).filter(a=>a.id==e.id)[0].tags,(e,a)=>(w(),s("li",{key:a,class:b([{active:a===n(ta)},"dropdown-item dropdown-item-tags"]),onClick:a=>n(Ze)("addFromDropdownMenu",e)},[c("span",Ps,m(e.name),1)],10,ks))),128))],512)),[[r,n(R)]])),256))],4)]),c("div",Cs,[c("input",{type:"number",class:"form-control",placeholder:"MFE Price",style:{"font-size":"small"},value:n(re).mfePrice,onClick:bl,onChange:a[7]||(a[7]=e=>{return a=e.target.value,re.mfePrice=parseFloat(a),be.value=ie[Y.value].dateUnix,void(ue.value=ie[Y.value].trades[$.value].id);var a})},null,40,Ts)])])],512),[[r,!n(O)]]),d(c("div",Ls,[c("textarea",{class:"form-control",placeholder:"note",id:"floatingTextarea",value:n(Ce),onInput:a[8]||(a[8]=e=>{return a=e.target.value,Ce.value=a,Se.value=ie[Y.value].dateUnix,Ue.value=ie[Y.value].trades[$.value].id,Q.value=!0,void(le.value=!0);var a})},null,40,Is)],512),[[r,!n(O)]]),d(c("div",Ss,[c("input",{class:"screenshotFile",type:"file",onChange:a[9]||(a[9]=e=>n(sa)(e,n(ie)[n(Y)].trades[n($)].entryTime,n(ie)[n(Y)].trades[n($)].symbol,n(ie)[n(Y)].trades[n($)].side))},null,32)],512),[[r,!n(O)]]),d(c("div",Us,[c("div",Ms,[c("div",As,[d(c("button",{class:"btn btn-outline-primary btn-sm ms-3 mb-2",onClick:a[10]||(a[10]=e=>cl(n(Y),n($),n($)-1)),disabled:1==n(O)},Ds,8,Ns),[[r,n(ie)[n(Y)].trades.hasOwnProperty(n($)-1)]])]),c("div",Vs,[n(le)?(w(),s("button",{key:0,class:"btn btn-outline-success btn-sm",onClick:a[11]||(a[11]=e=>cl())},"Close & Save")):(w(),s("button",{key:1,class:"btn btn-outline-primary btn-sm",onClick:a[12]||(a[12]=e=>cl())},"Close"))]),d(c("div",js,[c("button",{class:"btn btn-outline-primary btn-sm me-3 mb-2",onClick:a[13]||(a[13]=e=>cl(n(Y),n($),n($)+1)),disabled:1==n(O)},Fs,8,Es)],512),[[r,n(ie)[n(Y)].trades.hasOwnProperty(n($)+1)]])])],512),[[r,!n(O)]]),d(c("div",Os,Qs,512),[[r,n(O)]])])])]),Bs])):o("",!0)])])]),c("div",_s,[c("div",Ks,[c("div",zs,[c("div",Hs,[c("div",Ws,[c("div",Xs,[(w(!0),s(u,null,p(n(ne),(e,a)=>(w(),s("span",{key:a,class:"tag txt-small",style:x({"background-color":n(Be)(e.id).groupColor}),onClick:e=>n(Ze)("remove",a)},[v(m(e.name),1),Gs],12,qs))),128)),d(c("input",{type:"text","onUpdate:modelValue":a[14]||(a[14]=e=>y(se)?se.value=e:null),onInput:a[15]||(a[15]=(...e)=>n($e)&&n($e)(...e)),onKeydown:[a[16]||(a[16]=g(h(e=>n(Ze)("add",n(se)),["prevent"]),["enter"])),a[17]||(a[17]=g(h(e=>n(Ze)("add",n(se)),["prevent"]),["tab"]))],class:"form-control tag-input",placeholder:"Add a tag"},null,544),[[f,n(se)]]),c("div",{class:"clickable-area",onClick:a[18]||(a[18]=(...e)=>n(ea)&&n(ea)(...e))})])]),c("ul",{id:"dropdown-menu-tags",class:"dropdown-menu-tags",style:x([n(R)?"":"border: none;"])},[(w(!0),s(u,null,p(n(de),e=>d((w(),s("span",null,[d(c("h6",{class:"p-1 mb-0",style:x("background-color: "+e.color+";")},m(e.name),5),[[r,n(aa)(e.id).filter(a=>a.id==e.id)[0].tags.length>0]]),(w(!0),s(u,null,p(n(aa)(e.id).filter(a=>a.id==e.id)[0].tags,(e,a)=>(w(),s("li",{key:a,class:b([{active:a===n(ta)},"dropdown-item dropdown-item-tags"]),onClick:a=>n(Ze)("addFromDropdownMenu",e)},[c("span",Rs,m(e.name),1)],10,Js))),128))],512)),[[r,n(R)]])),256))],4)]),c("div",Ys,[c("button",{class:"btn btn-outline-primary btn-sm",onClick:pl},"Close"),c("button",{class:"btn btn-outline-success btn-sm ms-4",onClick:a[19]||(a[19]=e=>(async()=>{z.value&&(await Promise.all([H(),W()]),await Promise.all([X(),q()])),z.value=!1,pl()})())},"Save")])])])])],64))}};export{Zs as default};
